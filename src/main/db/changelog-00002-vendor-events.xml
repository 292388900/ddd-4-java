<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd 
	                    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<changeSet id="2" author="michael">
		<comment>Create event tables for the Vendor aggregate</comment>

		<createTable tableName="vendor_events" remarks="Events of aggregate Vendor">
			<column name="vendor_id" type="java.sql.Types.VARCHAR(36)">
				<constraints nullable="false" />
			</column>
			<column name="event_number" type="java.sql.Types.INTEGER(10)">
				<constraints nullable="false" />
			</column>
			<column name="events_id" type="java.sql.Types.BIGINT">
				<constraints nullable="false" references="EVENTS"
					foreignKeyName="fk__vendor_events__events_id" />
			</column>
		</createTable>

		<addPrimaryKey tableName="vendor_events" columnNames="vendor_id, event_number"
			constraintName="pk__vendor_events" />

		<createTable tableName="vendor_streams" remarks="Vendor streams">
			<column name="vendor_id" type="java.sql.Types.VARCHAR(36)">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="pk__vendor_streams" />
			</column>
			<column name="version" type="java.sql.Types.INTEGER(10)">
				<constraints nullable="false" />
			</column>
			<column name="deleted" type="java.sql.Types.INTEGER(1)">
				<constraints nullable="false" />
			</column>
		</createTable>

	</changeSet>

</databaseChangeLog>

